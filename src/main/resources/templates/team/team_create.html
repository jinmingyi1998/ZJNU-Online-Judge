<!--
  ~ Copyright (c) 2019. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
  ~ Morbi non lorem porttitor neque feugiat blandit. Ut vitae ipsum eget quam lacinia accumsan.
  ~ Etiam sed turpis ac ipsum condimentum fringilla. Maecenas magna.
  ~ Proin dapibus sapien vel ante. Aliquam erat volutpat. Pellentesque sagittis ligula eget metus.
  ~ Vestibulum commodo. Ut rhoncus gravida arcu.
  -->

<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:insert="~{fragment/header :: header}"></th:block>
    <meta charset="UTF-8">
    <title>Teams</title>
    <script>
        $(function () {
            $("#name").change(function () {
                var tname = $(this).val();
                $.get({
                    url: "/team/rest/checkname",
                    data: {
                        name: tname
                    },
                    success: function (res) {
                        if (res != "success") {
                            $("#input-name").text(res);
                            $("#input-name").show();
                        } else {
                            $("#input-name").hide();
                        }
                    }
                });
            });
        });

        function createTeam() {
            $.post({
                url: "/team/rest/create",
                data: $("#team-form").serialize(),
                cache: false,
                dataType: 'text',
                success: function (res) {
                    if (res == "success") {
                        alert("Success");
                        location.href = "/team";
                    }
                }
            });
        }
    </script>
</head>
<body>
<main class="container-fluid" height="100%" width="100%">
    <form class="container" id="team-form">
        <div class="form-inline"><span class="font-weight-bold bg-warning" id="input-name" style="display: none"></span>
            Name: <input class="form-control" id="name" name="name" type="text">
        </div>
        <div class="form-group">
            Introduction: <textarea class="form-control" cols="30" id="introduction" name="introduction"
                                    rows="10"></textarea>
        </div>
        <div class="form-inline">
            Join Policy:
            <select class="form-control" id="joinPolicy" name="joinPolicy">
                <option value="invite">invite</option>
                <option value="apply">apply</option>
                <option value="free">free</option>
            </select>
        </div>
        <button class="btn btn-primary" onclick="createTeam()">Create</button>
    </form>
</main>
<footer th:replace="~{fragment/footer :: footer}"></footer>
</body>
</html>